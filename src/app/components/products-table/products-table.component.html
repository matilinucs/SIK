<div class="products-table-container">  <!-- Encabezado -->  <div class="table-header">
    <h2>Productos en Cubicación - Proyecto Santa Marta</h2>
    <div class="table-actions">
      <button mat-raised-button color="primary" [matMenuTriggerFor]="exportMenu" class="action-button export-button" matTooltip="Exportar">
        <mat-icon>file_download</mat-icon> Exportar
      </button>
      <mat-menu #exportMenu="matMenu">
        <button mat-menu-item (click)="exportToExcel()">
          <mat-icon>description</mat-icon>
          <span>Exportar Excel</span>
        </button>
      </mat-menu>
      <button mat-raised-button color="primary" class="action-button add-button" matTooltip="Agregar producto">
        <mat-icon>add</mat-icon> Agrega
      </button>
    </div>
  </div>
  
  <!-- Tabla -->
  <div class="table-container">
    <table mat-table [dataSource]="productsDataSource" class="products-table">
      <!-- Código de Producto -->
      <ng-container matColumnDef="productCode">
        <th mat-header-cell *matHeaderCellDef>Código</th>
        <td mat-cell *matCellDef="let product" class="code-cell">{{product.productCode}}</td>
      </ng-container>

      <!-- Tipo de Ventana -->
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Tipo de Ventana</th>
        <td mat-cell *matCellDef="let product">{{product.type}}</td>
      </ng-container>

      <!-- Cantidad -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef>Cantidad</th>
        <td mat-cell *matCellDef="let product">{{product.quantity}}</td>
      </ng-container>

      <!-- Superficie Total -->
      <ng-container matColumnDef="totalArea">
        <th mat-header-cell *matHeaderCellDef>Superficie Total</th>
        <td mat-cell *matCellDef="let product" class="area-cell">
          {{product.totalArea | number:'1.2-2'}} <span class="unit">m²</span>
        </td>
      </ng-container>

      <!-- Presupuesto -->
      <ng-container matColumnDef="budget">
        <th mat-header-cell *matHeaderCellDef>Presupuesto</th>
        <td mat-cell *matCellDef="let product" class="amount-cell">
          {{product.budget | currency:'USD'}}
        </td>
      </ng-container>

      <!-- Acciones -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="actions-cell">Acciones</th>
        <td mat-cell *matCellDef="let product" class="actions-cell">
          <button mat-icon-button color="primary" (click)="onEdit(product)" matTooltip="Editar">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="onDelete(product)" matTooltip="Eliminar">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Mensaje cuando no hay productos -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell no-data-cell" [attr.colspan]="displayedColumns.length">
          <div class="no-data-message">
            <mat-icon>inventory_2</mat-icon>
            <p>No hay productos agregados a la cubicación</p>
          </div>
        </td>
      </tr>
    </table>
  </div>

  <!-- Footer con resumen -->
  <div class="table-footer" *ngIf="productsDataSource.data.length > 0">
    <div class="summary-info">
      <div class="summary-item">
        <span class="label">Total de productos:</span>
        <span class="value">{{getTotalProducts()}}</span>
      </div>
      <div class="summary-item">
        <span class="label">Superficie total:</span>
        <span class="value">{{getTotalArea() | number:'1.2-2'}} m²</span>
      </div>
      <div class="summary-item total">
        <span class="label">Presupuesto total:</span>
        <span class="value">{{getTotalBudget() | currency:'USD'}}</span>
      </div>
    </div>
  </div>
</div>
